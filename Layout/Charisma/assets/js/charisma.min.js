$(document)
		.ready(
				function() {
					if ($.browser.msie) {
						$('#is-ajax').prop('checked', false);
						$('#for-is-ajax').hide();
						$('#toggle-fullscreen').hide();
						$('.login-box').find('.input-large').removeClass(
								'span10');
					}
					$('ul.main-menu li a').each(function() {
						if ($($(this))[0].href == String(window.location))
							$(this).parent().addClass('active');
					});
					$('a.ajax-link')
							.click(
									function(e) {
										if ($.browser.msie)
											e.which = 1;
										if (e.which != 1
												|| !$('#is-ajax').prop(
														'checked')
												|| $(this).parent().hasClass(
														'active'))
											return;
										e.preventDefault();
										if ($('.btn-navbar').is(':visible')) {
											$('.btn-navbar').click();
										}
										$('#loading').remove();
										$('#content')
												.fadeOut()
												.parent()
												.append(
														'<div id="loading" class="center">Loading...<div class="center"></div></div>');
										var $clink = $(this);
										History.pushState(null, null, $clink
												.attr('href'));
										$('ul.main-menu li.active')
												.removeClass('active');
										$clink.parent('li').addClass('active');
									});
					$('ul.main-menu li:not(.nav-header)').hover(function() {
						$(this).animate({
							'margin-left' : '+=5'
						}, 300);
					}, function() {
						$(this).animate({
							'margin-left' : '-=5'
						}, 300);
					});
					docReady();
				});
function docReady() {
	$('a[href="#"][data-top!=true]').click(function(e) {
		e.preventDefault();
	});
	
	$('.nav-tab-active a:first').tab('show');
	$('#nav-tabs a').click(function(e) {
		e.preventDefault();
		$(this).tab('show');
	});
	
	$('#myTab a:first').tab('show');
	$('ul.gallery li')
			.hover(
					function() {
						$('img', this).fadeToggle(1000);
						$(this).find('.gallery-controls').remove();
						$(this)
								.append(
										'<div class="well gallery-controls">'
												+ '<p><a href="#" class="gallery-edit btn"><i class="icon-edit"></i></a> <a href="#" class="gallery-delete btn"><i class="icon-remove"></i></a></p>'
												+ '</div>');
						$(this).find('.gallery-controls').stop().animate({
							'margin-top' : '-1'
						}, 400, 'easeInQuint');
					}, function() {
						$('img', this).fadeToggle(1000);
						$(this).find('.gallery-controls').stop().animate({
							'margin-top' : '-30'
						}, 200, 'easeInQuint', function() {
							$(this).remove();
						});
					});
	$('.thumbnails').on('click', '.gallery-delete', function(e) {
		e.preventDefault();
		$(this).parents('.thumbnail').fadeOut();
	});
	$('.thumbnails').on('click', '.gallery-edit', function(e) {
		e.preventDefault();
	});
	$('#toggle-fullscreen')
			.button()
			.click(
					function() {
						var button = $(this), root = document.documentElement;
						if (!button.hasClass('active')) {
							$('#thumbnails').addClass('modal-fullscreen');
							if (root.webkitRequestFullScreen) {
								root
										.webkitRequestFullScreen(window.Element.ALLOW_KEYBOARD_INPUT);
							} else if (root.mozRequestFullScreen) {
								root.mozRequestFullScreen();
							}
						} else {
							$('#thumbnails').removeClass('modal-fullscreen');
							(document.webkitCancelFullScreen
									|| document.mozCancelFullScreen || $.noop)
									.apply(document);
						}
					});
	$('.btn-close').click(function(e) {
		e.preventDefault();
		$(this).parent().parent().parent().fadeOut();
	});
	$('.btn-minimize').click(
			function(e) {
				e.preventDefault();
				var $target = $(this).parent().parent().next('.box-content');
				if ($target.is(':visible'))
					$('i', $(this)).removeClass('icon-chevron-up').addClass(
							'icon-chevron-down');
				else
					$('i', $(this)).removeClass('icon-chevron-down').addClass(
							'icon-chevron-up');
				$target.slideToggle();
			});
	$('.btn-setting').click(function(e) {
		e.preventDefault();
		$('#myModal').modal('show');
	});
	$('#external-events div.external-event').each(function() {
		var eventObject = {
			title : $.trim($(this).text())
		};
		$(this).data('eventObject', eventObject);
		$(this).draggable({
			zIndex : 999,
			revert : true,
			revertDuration : 0
		});
	});
	var data = [], totalPoints = 300;
	function getRandomData() {
		if (data.length > 0)
			data = data.slice(1);
		while (data.length < totalPoints) {
			var prev = data.length > 0 ? data[data.length - 1] : 50;
			var y = prev + Math.random() * 10 - 5;
			if (y < 0)
				y = 0;
			if (y > 100)
				y = 100;
			data.push(y);
		}
		var res = [];
		for (var i = 0; i < data.length; ++i)
			res.push([ i, data[i] ])
		return res;
	}
	var updateInterval = 30;
	$("#updateInterval").val(updateInterval).change(function() {
		var v = $(this).val();
		if (v && !isNaN(+v)) {
			updateInterval = +v;
			if (updateInterval < 1)
				updateInterval = 1;
			if (updateInterval > 2000)
				updateInterval = 2000;
			$(this).val("" + updateInterval);
		}
	});
}
// datatable
